<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Whatsapp Chatbot</title>
	<link rel="stylesheet" href="css/style.css">
</head>
<script src="https://cdn.tailwindcss.com"></script>
<body>
	<div class="container">
		<div class="chat">
			<div class="chat-header">
				<div class="profile">
					<div class="left">
						<img src="img/pp.png" class="pp">
						<h2>Elias</h2>
						<span>online</span>
					</div>
					<div class="right">
					</div>
				</div>
			</div>
			<div class="chat-box">
<div class="chat-l">
  <div class="product-card">
    
    <div class="product-header">
      <img src="img/headphone.png" alt="Product">
      <span class="price">225</span>
    </div>

    <div class="product-body">
      <p class="title">
        Welcome to <b>Urban Studioz</b> üëã <br>
        <span>Select from the options below</span>
      </p>
      <span class="time">4:31 pm</span>
    </div>

<div class="product-actions">
  <button onclick="sendOption(this)" data-text="Product/Service Info">Product/Service Info</button>
  <button onclick="sendOption(this)" data-text="Price">Price</button>
  <button onclick="sendOption(this)" data-text="How it works">How it works</button>
    <button onclick="sendOption(this)" data-text="Talk to Expert">Talk to Expert</button>
      <button onclick="sendOption(this)" data-text="Just Browsing">Just Browsing</button>
</div>

  </div>
</div>

</div>
			<div class="chat-footer">
      <p> Powered by CodeCandyy </p>
			</div>
		</div>
	</div>
	<script>
const chatBox = document.querySelector(".chat-box");

function sendOption(btn) {
  const text = btn.dataset.text;

  // USER MESSAGE (right side)
  const userMsg = `
    <div class="chat-r">
      <div class="sp"></div>
      <div class="mess mess-r">
        <p>${text}</p>
        <div class="check">
          <span>${getTime()}</span>
          <img src="img/check-2.png">
        </div>
      </div>
    </div>
  `;
  chatBox.insertAdjacentHTML("beforeend", userMsg);
  scrollBottom();

  // BOT RESPONSE AFTER DELAY
  setTimeout(() => {
    botReply(text);
  }, 800);
}

function botReply(userText) {
  let reply = "";
  let cardType = null;

  const responseMap = {
    "Product/Service Info": {
      reply: "Great choice üòä Here are our latest products.",
      card: "product"
    },
    "Price": {
      reply: "Here‚Äôs our pricing details üí∞",
      card: "pricing"
    },
    "How it works": {
      reply: "Here‚Äôs how everything works ‚öôÔ∏è",
      card: "working"
    },
    "Talk to Expert": {
      reply: "Choose how you'd like to talk with us üë®‚Äçüíº",
      card: "experttalk"
    },
    "Just Browsing": {
      reply: "No worries üòä Take a look around!",
      card: "main"
    },
    "What's Included": {
      reply: "Here‚Äôs what‚Äôs included in our service üì¶",
      card: "Included"
    },
    "Ask anything else": {
      reply: "Sure! What would you like to ask? ü§î",
      card: "somethingelse"
    },
    "Not Interested": {
      reply: "No problem üòä Have a great day!",
      card: null
    },
    "Phone Call": {
      reply: "Our expert will call you shortly üìû",
      card: null
    },
    "WhatsApp Chat (Recomended)": {
      reply: "Redirecting you to WhatsApp üí¨",
      card: null
    }
  };

  const response = responseMap[userText];

  if (response) {
    reply = response.reply;

    if (response.card) {
      setTimeout(() => {
        chatBox.insertAdjacentHTML("beforeend", optionsCard(response.card));
        scrollBottom();
      }, 1000);
    }
  } else {
    reply = "Connecting you to a support agent üë®‚Äçüíª";
  }

  const botMsg = `
    <div class="chat-l">
      <div class="mess">
        <p>${reply}</p>
        <div class="check">
          <span>${getTime()}</span>
        </div>
      </div>
      <div class="sp"></div>
    </div>
  `;

  chatBox.insertAdjacentHTML("beforeend", botMsg);
  scrollBottom();
}

function optionsCard(type = "main") {
  const cards = {
  main: {
    title: "How can we help you today? üëá",
    options: [
      "Product/Service Info",
      "Price",
      "How it works",
      "Talk to Expert",
      "Just Browsing"
    ]
  },

  product: {
    title: "What would you like to know next? ü§î",
    options: [
      "How it works",
      "Price",
      "Talk to Expert",
      "Ask anything else",
      "Not Interested"
    ]
  },

  pricing: {
    title: "Let‚Äôs give you more clarity.",
    options: [
      "What's Included",
      "Talk to Expert",
      "Ask something else",
      "Not Interested"
    ]
  },

  working: {
    title: "Let's proceed further.",
    options: [
      "Product/Service Info",
      "Price",
      "Talk to Expert",
      "Ask anything else",
      "Not Interested"
    ]
  },

  experttalk: {
    title: "Connect with an expert üìûüí¨",
    options: [
      "Phone Call",
      "WhatsApp Chat (Recommended)"
    ]
  },

  somethingelse: {
    title: "What else can we help you with? üòä",
    options: [
      "Talk to Expert",
      "Product/Service Info",
      "How it works",
      "Price"
    ]
  },

  Included: {
    title: "Let's proceed further.",
    options: [
      "Talk to Expert",
      "Ask anything else",
      "How it works",
      "Price"
    ]
  }
};

  const card = cards[type] || cards.main;

  return `
    <div class="chat-l">
      <div class="product-card">
        <div class="product-body">
          <p><b>${card.title}</b></p>
        </div>
        <div class="product-actions">
          ${card.options
            .map(
              option =>
                `<button onclick="sendOption(this)" data-text="${option}">
                  ${option}
                </button>`
            )
            .join("")}
        </div>
      </div>
    </div>
  `;
}

function getTime() {
  return new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
}

function scrollBottom() {
  chatBox.scrollTop = chatBox.scrollHeight;
}
</script>
</body>
</html>